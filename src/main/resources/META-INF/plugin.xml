<idea-plugin url="https://github.com/smijsm/Perforator">
    <id>com.perforator.perforator</id>
    <name>Perforator - Continuous profiling integration</name>
    <version>1.0.0</version>
    <vendor email="smijsm@gmail.com">Michael Solovev</vendor>
    <description><![CDATA[
    <b>IntelliJ IDEA plugin for continuous profiling integration:</b>
    <ol>
    <li>Connect to your Grafana Pyroscope instance and fetch profiling data.</li>
    <li>View CPU and memory performance metrics directly in the editor.</li>
    <li>See hot spots highlighted with gutter badges showing execution time or memory usage.</li>
    <li>Right-click badges to copy performance optimization prompts for Junie or Claude Code.</li>
    </ol>
    Current backend: Grafana Pyroscope. Other integrations are planned.<br/>
    Supported profile types: CPU (execution time), Memory (allocation size).<br/><br/>
    <b>Features:</b>
    <ul>
    <li>Real-time continuous profiling data visualization in code.</li>
    <li>Configurable hot thresholds for CPU (ms) and Memory (MB).</li>
    <li>Right-click badges to copy performance optimization prompts for AI agents.</li>
    </ul>
    <br/>
    <b>Setup:</b>
    <ol>
    <li>Settings → Tools → Perforator: set Base URL, Service Name, optional Basic Auth.</li>
    <li>Tools → Fetch profiling data.</li>
    <li>Right-click gutter badges to copy AI optimization prompts.</li>
    <li>(Optional) Install Junie or Claude Code, add and configure Grafana MCP server.</li>
    </ol>
    <br/>
    <b>Contribute:</b> <a href="https://github.com/smijsm/Perforator">Project on GitHub</a>
]]>
    </description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.modules.lang</depends>

    <idea-version since-build="251"/>

    <extensions defaultExtensionNs="com.intellij">
        <projectConfigurable
                parentId="tools"
                instance="com.perforator.perforator.PerforatorConfigurable"
                id="com.perforator.perforator.PerforatorConfigurable"
                displayName="Perforator"/>
        <annotator
                language="JAVA"
                implementationClass="com.perforator.perforator.PerforatorGutterAnnotator"/>
        <annotator
                language="kotlin"
                implementationClass="com.perforator.perforator.PerforatorGutterAnnotator"/>
    </extensions>

    <actions>
        <action id="com.perforator.perforator.FetchFromPyroscopeAction"
                class="com.perforator.perforator.FetchFromPyroscopeAction"
                text="Fetch Profiling Data"
                description="Fetch profiling data from Grafana Pyroscope and show performance toolbar">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
